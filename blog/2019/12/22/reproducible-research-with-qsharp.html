<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Reproducible Research with Q# &middot; cgranade::space
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">
  <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">

  <!-- JavaScript -->
  <script type="text/javascript" async
    src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
  </script>
  <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]},
      TeX: {
        Macros: {
          ket: ["\\left| #1\\right\\rangle", 1]
        }
      }
    });
  </script>
</head>


  <body>

    <div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <h1>
        <a href="/">
          cgranade::<br>space
        </a>
      </h1>
      <p class="lead"></p>
      <p class="lead">Quantum information ‚Ä¢ Statistical inference ‚Ä¢ Scientific programming</p>
    </div>

    <nav class="sidebar-nav">
      <a class="sidebar-nav-item" href="/">Home</a>

      

      
      

      <a class="sidebar-nav-item" href="/cv.html">CV</a>
      <a class="sidebar-nav-item" href="/research/">Research</a>
      <a class="sidebar-nav-item" href="/projects.html">Projects</a>
      <a class="sidebar-nav-item active" href="/blog/">Blog</a>
      <a class="sidebar-nav-item" href="/faq.html">FAQ</a>
      <a class="sidebar-nav-item" href="/contact.html">Contact</a>


      

      <a class="sidebar-nav-item" href="https://github.com/cgranade/cgranade.github.io">GitHub project</a>
    </nav>

    <p>&copy; 2023. Licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC-BY 4.0</a>
       except where otherwise noted.</p>
  </div>
</div>


    <div class="content container">
      <div class="post">
  <h1 class="post-title">Reproducible Research with Q#</h1>
  <span class="post-date">22 Dec 2019</span>
  <p><em>This post is part of the <a href="https://devblogs.microsoft.com/qsharp/q-advent-calendar-2019/">Q# Advent Calendar 2019</a>. Follow the calendar for other great posts!</em></p>

<h2 id="introduction">Introduction</h2>

<p>Almost three years ago, <a href="https://www.cgranade.com/blog/2017/05/08/software-for-reproducible-papers.html">I wrote here about the importance of reproducible research</a>, and about tools that can be used to make it easier to perform research in a way that makes reproduciblity <strong>easy</strong>.
Making it easy to do research in a reproducible fashion is critical ‚Äî not just to avoid the gatekeeping that all too often comes along with research, but also because people are much more likely to do the things that we <a href="https://www.cgranade.com/blog/2017/03/31/what-we-encourage.html">encourage them to do</a>.
Though reproducible research is critical throughout science, it‚Äôs also near and dear to my own heart given the importance to quantum computing.</p>

<p>Looking back at my post, a lot can change in three years.
That‚Äôs definitely been true in the quantum computing community.
Indeed, three years ago, the quantum computing community was much smaller, and much more heavily focused on more abstract research results.
As the community has grown, we‚Äôve seen a huge growth in both the number and variety of tools available to help explore quantum computing through reproducible research.
In this post, I‚Äôll take an opportunity to highlight how it‚Äôs easier than ever to get started in reproducible quantum computing research.</p>

<p>Let‚Äôs start with the punchline, though: <strong>the only software you need to get started is a browser.</strong></p>

<h2 id="reproducible-research-with-visual-studio-online">Reproducible Research with Visual Studio Online</h2>

<p>As a member of the team that <a href="https://devblogs.microsoft.com/qsharp/a-second-year-of-q/">launched the Quantum Development Kit and the Q# language two years ago</a>, I‚Äôm particularly excited for how Q# has helped enable quantum computing research by making it easier to <a href="https://docs.microsoft.com/quantum/techniques/testing-and-debugging">develop and test quantum algorithms</a>, <a href="https://docs.microsoft.com/quantum/machines/resources-estimator">estimate resource costs</a>, and once <a href="https://azure.com/quantum/">Azure Quantum</a> launches, even to <a href="https://myignite.techcommunity.microsoft.com/sessions/84347?source=sessions">run quantum programs on hardware</a>.
Thanks to the <a href="https://online.visualstudio.com/">recent launch of Visual Studio Online</a>, you can now do all of that from your browser.
To get started with Visual Studio Online, you‚Äôll need two things:</p>

<ul>
  <li>A <a href="https://github.com/">GitHub</a> account</li>
  <li>An <a href="http://azure.com/">Azure</a> subscription</li>
</ul>

<p>If you don‚Äôt already have an Azure subscription, you can get <a href="https://azure.microsoft.com/en-us/free/">$200 worth of free credits</a> to help you get started.
Note that if you‚Äôre at a university or other research instutition, they may also have purchased an Azure subscription already.</p>

<p>In either case, I‚Äôve put together a template to help you get started, so let‚Äôs go on and get started.
Go to <a href="https://github.com/cgranade/quantum-research-template">https://github.com/cgranade/quantum-research-template</a>, and you should see a button labeled ‚ÄúUse this template.‚Äù</p>

<p><img src="/assets/figures/github-use-template.png" /></p>

<p>When you click that button, you‚Äôll be prompted to make your own GitHub repository to help collect your work and share it with your collaborators.
Go on and give your new repository a name, and press ‚ÄúCreate repository from template.‚Äù
It will take a few moments, but then you‚Äôll have a repo all setup with the start of a LaTeX manuscript, some Q# code, and a script that will package everything up for uploading to the arXiv.</p>

<p>Next, let‚Äôs go to Visual Studio Online and use your new repository to setup an <strong>environment</strong>.
The template you copied in the previous step comes with instructions that Visual Studio Online can use to install LaTeX, Python, the .NET Core SDK, and other software that‚Äôs helpful for doing quantum research.</p>

<p>Go to <a href="http://online.visualstudio.com/">http://online.visualstudio.com/</a> and click ‚ÄúGet Started.‚Äù
Sign in with the account you use to get to your Azure subscription, and you‚Äôll be taken to the main Visual Studio Online portal.
Note that you may be prompted to create a plan if you haven‚Äôt already done so.
This tells Visual Studio Online what subscription you want to use with your new environment; handy if you have multiple subscriptions.</p>

<p>In any case, press ‚ÄúCreate environment,‚Äù give your new environment a name and then put in the name of the repo you created above.</p>

<p><img src="/assets/figures/vso-create-environment.png" /></p>

<p>Once you do all that, time to grab a coffee (or, if you‚Äôre <a href="https://csferrie.com/">Chris Ferrie</a>, a couple coffees).
By the time you get back, your new environment should be up and running, with everything installed from the template.</p>

<p>You can then write Q# code, run it, and embed the code directly into your paper.</p>

<p>Go on and try it out!
Open up <code class="language-plaintext highlighter-rouge">src/Operations.qs</code> from the side bar, and replace the definition of <code class="language-plaintext highlighter-rouge">HelloQ</code> with the following Q# code:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>open Microsoft.Quantum.Measurement;

operation HelloQ() : Unit {
    let randomBit = SampleRandomBit();
    Message($"Got {randomBit}!");
}

operation SampleRandomBit() : Result {
    using (q = Qubit()) {
        return MResetX(q);
    }
}
</code></pre></div></div>

<p>Next, open up your TeX manuscript, and try changing some text.
Whenever you save, your manuscript will automatically recompile and import the changes you made to your Q# sources.</p>

<p>Of course, you can run things too.
Press Ctrl+` or Command+` to bring up a terminal window, then run the following commands to see what your new Q# program does:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cd src
$ dotnet run
Got One!
</code></pre></div></div>

<p>If you prefer Python, that‚Äôs cool too:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ python host.py
Got 0!
</code></pre></div></div>

<p>When you‚Äôre ready to post to the arXiv, that‚Äôs just as straightforward:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cd ..
$ pwsh Export-ArXiv.ps1
</code></pre></div></div>

<p>Taking a step back, you got started writing quantum programs in Q#, included them in your manuscript, and got them ready for publication, all without installing a single piece of software.</p>

<p>Where this really helps with reproducibility, though, is that your collaborators can also make a Visual Studio Online environment from your new repository.
That will ensure that they run <strong>exactly</strong> the same software that you use for your part of the project.
When you‚Äôre done, you can go on and upload to arXiv using the provided script, making sure that all your source code comes along with your result.</p>

<h2 id="theres-a-lot-to-unpack-here">There‚Äôs a Lot to Unpack Here</h2>

<p>If the above all seems like magic, it isn‚Äôt: it‚Äôs the power of using the best open-source platforms around to do research.
Let‚Äôs see how that all comes together by taking a trip through the various technologies that you used in your template above.</p>

<h3 id="contain-yourself">Contain Yourself</h3>

<p>The first thing to look at is the concept of a <a href="https://www.docker.com/resources/what-container"><strong>container</strong></a>.
Using Q# to do reproducible research, your software stack might look a <em>little</em> different than it did three years ago.
For example, if you want to use Q# together with great host languages like C# or Python, and then include all of that into a paper written with LaTeX, you may wind up needing a variety of different tools:</p>

<ul>
  <li>.NET Core SDK (used to provide the Q# compiler)</li>
  <li>Python</li>
  <li>TeX / LaTeX</li>
  <li>Jupyter Notebook</li>
  <li>Visual Studio Code</li>
  <li>Git</li>
</ul>

<p>While thankfully these tools are all pretty straightforward to install, for reproducible research, that can present a bit of a challenge.
The more dependencies you take, the greater the chance one of your collaborators, referees, or readers will have a different version of something than what you used.
That can make it difficult to run your code and to verify your results.</p>

<p>This is also a problem for very different reasons in many other areas of computing, so for research purposes, we can borrow a trick or two to help us out.
In particular, the past few years have seen an explosion in the use of containers to isolate application dependencies for each other, and to deploy software in a robust way.</p>

<p>We can use that same idea to help out with research!
Much like Python‚Äôs <a href="https://virtualenv.pypa.io/en/stable/">virtual environments</a> or Anaconda‚Äôs <a href="https://docs.conda.io/projects/conda/en/latest/user-guide/tasks/manage-environments.html">conda envs</a>, containers can be used to manage side-by-side software installations, letting you use different versions of software packages for different projects.</p>

<p>The Quantum Development Kit uses this concept, for instance, to package everything you need to use IQ# in Jupyter Notebooks into a single container.
The <a href="https://github.com/microsoft/iqsharp/blob/master/images/iqsharp-base/Dockerfile">instructions on the IQ# repository</a> tell Docker, a popular container engine, how to build that container by installing different other packages into the IQ# container.</p>

<p>Once you have a container like one built to use IQ# and the Quantum Development Kit, there‚Äôs any number of different ways you can use it to do awesome stuff.
If you‚Äôve used the <a href="http://aka.ms/online-quantum-katas">zero-install version of the quantum katas</a>, for instance, that uses the IQ# container together with a really neat open-source service called <a href="https://mybinder.org/">Binder</a>.
When you use Binder with a project, that launches a new VM for you, builds a new container from the IQ# container, and forwards the Jupyter Notebook server running in the new container over to you.
While that is fairly complicated, it means a really straightforward experience for you when you try out different research, tutorials, or other content hosted on Binder.</p>

<h3 id="getting-a-bit-more-remote">Getting a Bit More Remote</h3>

<p>It turns out that Visual Studio Code can make use of the same kinds of container technology to help you develop your research.
If you noticed, there‚Äôs a folder called <code class="language-plaintext highlighter-rouge">.devcontainer</code> in the <a href="https://github.com/Microsoft/Quantum">Quantum Development Kit samples</a>, the <a href="https://github.com/Microsoft/Quantumkatas">quantum katas</a>, the <a href="https://github.com/microsoft/QuantumLibraries/">Q# libraries</a>, and even in the template you just used above.
These folders specify what containers to use when developing on those projects.
Once you <a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.vscode-remote-extensionpack">have the right extension installed</a>, when you open one of those repositories, that builds a new container from the instructions in <code class="language-plaintext highlighter-rouge">.devcontainer</code>.
Most of Visual Studio Code then runs <em>inside</em> that new container; only the graphical interface is running on your normal operating system.</p>

<p>From the standpoint of reproducibility, that‚Äôs great, as it means that all the software you use for a project is specified in one place, irrespective of what you might have installed on your normal OS.
Because the Quantum Development Kit is provided as a container, it‚Äôs really easy to use with devcontainers as well.</p>

<h3 id="very-online">Very Online</h3>

<p>What does all this have to do with Visual Studio Online, though?
It all comes down to that Visual Studio Code is built on another popular open-source technology, called <strong>Electron</strong>.
Electron works by embedding a version of Chrome to run your different apps.
This means that Visual Studio Code is effectively a web app tied to a special-purpose copy of Chrome.
You can even press Ctrl+Shift+I or Command+Shift+I to get to the same debugger tools as</p>

<p>Most of Visual Studio Code is written using web platforms like HTML, CSS, and TypeScript, similar to how you might make a traditional web app.
This means that the browser-based version of Visual Studio Online can work very similarly to Visual Studio Code, reusing existing technologies.</p>

<h2 id="phew-what-now">Phew, What Now?</h2>

<p>Research is best when we share it with people, collaborate on new ideas, and expand the communities around us.
Reproducible research helps us realize on those goals by making sure that our results are trustworthy and can form the basis for new research, new ideas, and new communitity members.</p>

<p>When we apply this insight to a quickly growing field like quantum computing, that only becomes more urgent.
It‚Äôs all too easy to put up new walls, jealously guard our research, and close ourselves in.
Thankfully, services like Visual Studio Online and open-source platforms like the Quantum Development Kit can use help us make the most of our research and be the best members of the quantum computing community that we can be.
In this post, I tried to give a small taste of that, but it definitely doesn‚Äôt stop here.
Please explore, try things out, and leave the quantum computing research community a better place than you found it! üíï</p>

</div>

<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/blog/2020/06/15/questions.html">
            A Few Questions About Myself
            <small>15 Jun 2020</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/blog/2020/05/08/gh-actions-test.html">
            Testing GitHub Actions
            <small>08 May 2020</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="/blog/2020/01/13/useful-skills-for-quantum.html">
            Some useful skills for quantum computing
            <small>13 Jan 2020</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>

    </div>

  </body>
</html>
